graph TD
    %% Data Sources
    subgraph "ğŸ“Š Data Sources"
        A1[ğŸ“ˆ Market Data<br/>Yahoo Finance, Alpha Vantage]
        A2[ğŸ”— Broker APIs<br/>Alpaca, Interactive Brokers]
    end

    %% Data Layer
    subgraph "ğŸ—„ï¸ Storage"
        B1[âš¡ Redis Cache]
        B2[ğŸ—„ï¸ TimescaleDB]
    end

    %% API Gateway (FREE)
    subgraph "ğŸšª Gateway"
        C1[ğŸŒ‰ Traefik<br/>FREE API Gateway]
        C2[ğŸ” Keycloak<br/>FREE Auth]
    end

    %% Application Layer
    subgraph "ğŸ’» Application"
        D1[ğŸŒ Web App<br/>Auto-fade Notifications]
        D2[ğŸ¤– Trading Engine<br/>Strategy & Portfolio]
    end

    %% Background Services
    subgraph "âš™ï¸ Processing"
        E1[ğŸ“Š Celery Workers]
        E2[ğŸ§  AI/ML Models]
    end

    %% Monitoring (FREE)
    subgraph "ğŸ“ˆ Monitoring"
        F1[ğŸ§  Prometheus<br/>FREE Monitoring]
        F2[ğŸ” Elasticsearch<br/>FREE Logging]
    end

    %% Connections
    A1 --> B1
    A2 --> B1
    B1 --> C1
    B2 --> C1
    C1 --> D1
    C2 --> D1
    D1 --> D2
    D2 --> E1
    E1 --> E2
    E2 --> F1
    F1 --> F2

    %% Styling
    classDef freeAlternative fill:#e1f5fe,stroke:#01579b,stroke-width:3px
    classDef enhanced fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef core fill:#fff3e0,stroke:#e65100,stroke-width:2px
    
    class C1,C2,F1,F2 freeAlternative
    class D1,E2 enhanced
    class D2 core 